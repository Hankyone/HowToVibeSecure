/* Minimal, no-build stylesheet for one-page app */
:root {
  /* Projection-friendly light theme only */
  --bg: #f8fafc; 
  --bg-elev: #ffffff; 
  --text: #0f172a; 
  --muted: #475569; 
  --accent: #0ea5e9; 
  --accent-weak: #bae6fd; 
  --border: #e2e8f0; 
}

* { box-sizing: border-box; }
html, body { height: 100%; }
html {
  scroll-behavior: smooth;
  overscroll-behavior-y: none; /* avoid top/bottom bounce showing page chrome */
  background: linear-gradient(180deg, var(--bg) 0%, var(--bg-elev) 100%);
}
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: linear-gradient(180deg, var(--bg) 0%, var(--bg-elev) 100%);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  height: 100svh; /* lock body height to viewport to prevent rubber-banding */
  overflow: hidden; /* scrolling happens on #content */
}

/* Timeline removed for cleaner look */

/* Slides */
.content, #content { position: fixed; inset: 0; overflow-y: auto; scroll-snap-type: y mandatory; scroll-behavior: smooth; overscroll-behavior-y: contain; }
.slide {
  min-height: 100svh;
  padding: clamp(1rem, 3vw + 1rem, 3rem);
  display: grid;
  align-content: start;
  gap: 1rem;
  border-bottom: 1px solid var(--border);
  scroll-snap-align: start;
  scroll-snap-stop: always;
  border-left: 6px solid var(--accent);
  background: linear-gradient(180deg,
      color-mix(in oklab, var(--bg), var(--accent) 6%),
      var(--bg-elev));
  position: relative;
}

/* Slides have colored left border for visual appeal */
.slide h1 { font-size: clamp(2rem, 4vw + 1rem, 3rem); margin: 0; }
.slide h2 { font-size: clamp(1.5rem, 2vw + 1rem, 2.2rem); margin: 0; }
.slide p, .slide li { line-height: 1.55; }
.lead { margin: 0; padding-left: 1.2rem; }
.hint { color: var(--muted); font-size: 0.95rem; }

.demo { background: color-mix(in oklab, var(--bg-elev), white 2%); border: 1px solid var(--border); border-radius: 0.75rem; padding: 1rem; }
.notes { color: var(--muted); }
.notes summary { cursor: pointer; }

/* Basics */
code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
pre { background: color-mix(in oklab, var(--bg-elev), black 8%); border: 1px solid var(--border); padding: 0.75rem; border-radius: 0.5rem; overflow: auto; }
a { color: var(--accent); }

/* Enhanced styling for security presentation */

/* Intro slide specific */
.subtitle { font-size: 1.2rem; font-weight: 600; color: var(--muted); margin: 0.5rem 0 1.5rem 0; }
.about-author { margin-top: 2rem; padding: 1rem; background: color-mix(in oklab, var(--bg-elev), var(--accent) 8%); border-radius: 0.5rem; border-left: 3px solid var(--accent); }
.about-author a { color: var(--accent); text-decoration: none; font-weight: 600; }
.about-author a:hover { text-decoration: underline; }
.author-background { margin-top: 1rem; }
.author-background p { margin: 0.5rem 0; color: var(--muted); font-size: 0.9rem; }

/* Demo components */
.comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin: 1rem 0; }
.frontend-side, .backend-side { padding: 1rem; border-radius: 0.5rem; }
.frontend-side { background: color-mix(in oklab, var(--bg-elev), #ef4444 8%); border-left: 3px solid #ef4444; }
.backend-side { background: color-mix(in oklab, var(--bg-elev), #22c55e 8%); border-left: 3px solid #22c55e; }

.demo-controls { display: flex; flex-direction: column; gap: 0.75rem; }
.demo-status { margin: 0; padding: 0.75rem; background: var(--bg-elev); border-radius: 0.375rem; border: 1px solid var(--border); }
.demo-instructions { margin-top: 1rem; padding: 1rem; background: color-mix(in oklab, var(--bg-elev), var(--accent) 5%); border-radius: 0.5rem; font-size: 0.9rem; }

/* Sticky rules highlighting */
.sticky-rules { background: color-mix(in oklab, var(--bg-elev), var(--accent) 10%); padding: 1.5rem; border-radius: 0.75rem; border: 2px solid var(--accent); }
.sticky-rules h3 { margin-top: 0; color: var(--accent); }
.rule { font-weight: 600; margin: 0.5rem 0; }

.key-points { margin: 1.5rem 0; }
.key-points li { margin: 0.75rem 0; }
.hook-example { margin-top: 1.5rem; padding: 1rem; background: color-mix(in oklab, var(--bg-elev), #f59e0b 8%); border-radius: 0.5rem; border-left: 3px solid #f59e0b; font-style: italic; }

/* AI prompt styling */
.prompt-template, .assistant-brief { margin: 1rem 0; }
.security-criteria { background: var(--bg-elev); padding: 1rem; border-radius: 0.5rem; border: 1px solid var(--border); }
.security-criteria li { margin: 0.5rem 0; }
.one-liner { margin-top: 1.5rem; padding: 1rem; background: color-mix(in oklab, var(--bg-elev), var(--accent) 8%); border-radius: 0.5rem; text-align: center; border: 2px dashed var(--accent); }

.prompt-box { background: #1a1a1a; color: #f0f0f0; padding: 1rem; border-radius: 0.5rem; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 0.9rem; border: 1px solid var(--border); }
.prompt-box p { margin: 0; line-height: 1.4; }

/* Verification sections */
.verify-section { margin: 1rem 0; }
.checklist { list-style: none; padding: 0; }
.checklist li { padding: 0.25rem 0; }

/* Mental model highlighting */
.mental-model { margin: 1rem 0; padding: 1rem; background: color-mix(in oklab, var(--bg-elev), var(--accent) 5%); border-radius: 0.5rem; }
.highlight { background: var(--accent-weak); padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-weight: 600; }

/* Demo styling */
.demo h4 { margin-top: 0; color: var(--accent); border-bottom: 2px solid var(--accent-weak); padding-bottom: 0.5rem; }

/* User tabs for RLS demo */
.user-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
.user-tab { padding: 0.5rem 1rem; border: 1px solid var(--border); background: var(--bg-elev); border-radius: 0.375rem; cursor: pointer; }
.user-tab.active { background: var(--accent); color: white; border-color: var(--accent); }

.test-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
.test-actions button { padding: 0.5rem 1rem; border: 1px solid var(--border); background: var(--bg-elev); border-radius: 0.375rem; cursor: pointer; }
.test-actions button:hover { background: var(--accent-weak); }

/* Results styling */
.rls-results, .scan-results, .validation-results, .request-log, .headers-output, .ssrf-results, .test-output { 
  margin-top: 1rem; 
  min-height: 3rem; 
  padding: 1rem; 
  background: var(--bg-elev); 
  border: 1px solid var(--border); 
  border-radius: 0.5rem; 
}

.rls-result, .log-entry, .ssrf-result { 
  padding: 0.75rem; 
  margin: 0.5rem 0; 
  border-radius: 0.375rem; 
  border-left: 3px solid;
}

.success { border-left-color: #22c55e; background: color-mix(in oklab, var(--bg-elev), #22c55e 8%); }
.error { border-left-color: #ef4444; background: color-mix(in oklab, var(--bg-elev), #ef4444 8%); }
.warning { border-left-color: #f59e0b; background: color-mix(in oklab, var(--bg-elev), #f59e0b 8%); }
.info { border-left-color: #0ea5e9; background: color-mix(in oklab, var(--bg-elev), #0ea5e9 8%); }

/* XSS Demo specific */
.demo-inputs, .demo-output { margin: 1rem 0; }
.demo-buttons { display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap; }
.danger-btn { background: #ef4444; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.375rem; cursor: pointer; }
.safe-btn { background: #22c55e; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.375rem; cursor: pointer; }
.danger-btn:hover { background: #dc2626; }
.safe-btn:hover { background: #16a34a; }

.xss-output { padding: 1rem; border: 1px solid var(--border); border-radius: 0.375rem; min-height: 3rem; margin-top: 0.5rem; }
.xss-output.insecure { border-color: #ef4444; background: color-mix(in oklab, var(--bg-elev), #ef4444 5%); }
.xss-output.secure { border-color: #22c55e; background: color-mix(in oklab, var(--bg-elev), #22c55e 5%); }

.xss-samples, .ssrf-samples { margin-top: 1rem; font-size: 0.9rem; }
.sample-buttons { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem; }
.sample-buttons button { padding: 0.25rem 0.5rem; font-size: 0.8rem; background: var(--bg-elev); border: 1px solid var(--border); border-radius: 0.25rem; cursor: pointer; }

/* What NOT to do styling */
.what-not-to-do { margin: 1rem 0; }
.dont-list { background: color-mix(in oklab, var(--bg-elev), #ef4444 8%); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid #ef4444; }
.dont-list li { margin: 0.5rem 0; }
.dont-list code { background: rgba(239, 68, 68, 0.1); }

/* Vulnerability cards */
.vuln-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin: 1rem 0; }
.vuln-card { padding: 1rem; background: var(--bg-elev); border: 1px solid var(--border); border-radius: 0.5rem; border-left: 3px solid var(--accent); }
.vuln-card h4 { margin-top: 0; color: var(--accent); }
.vuln-card p { margin: 0.5rem 0; font-size: 0.9rem; }

/* Testing steps */
.testing-steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0; }
.step { padding: 1rem; background: var(--bg-elev); border: 1px solid var(--border); border-radius: 0.5rem; border-top: 3px solid var(--accent); }
.step h3 { margin-top: 0; color: var(--accent); }

/* Checklist grid */
.checklist-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 0.75rem; margin: 1rem 0; }
.checklist-item { display: flex; align-items: flex-start; gap: 0.5rem; padding: 0.75rem; background: var(--bg-elev); border: 1px solid var(--border); border-radius: 0.375rem; cursor: pointer; }
.checklist-item:hover { background: color-mix(in oklab, var(--bg-elev), var(--accent) 5%); }
.checklist-item input[type="checkbox"] { margin: 0; }
.checklist-item span { line-height: 1.4; }

/* Resources styling */
.resources-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1rem 0; }
.resource-section h3 { color: var(--accent); margin-top: 0; }
.prompt-examples { margin-top: 1rem; }
.prompt-example { margin: 1rem 0; padding: 1rem; background: var(--bg-elev); border-radius: 0.5rem; border-left: 3px solid var(--accent); }
.prompt-example strong { color: var(--accent); }
.prompt-example code { display: block; margin-top: 0.5rem; padding: 0.5rem; background: rgba(0,0,0,0.05); border-radius: 0.25rem; font-size: 0.85rem; line-height: 1.3; }

/* File upload styling */
#fileInput { margin-bottom: 1rem; padding: 0.5rem; border: 1px solid var(--border); border-radius: 0.375rem; }
.upload-status { margin: 0.5rem 0; }
.validation-summary { padding: 0.75rem; border-radius: 0.375rem; font-weight: 600; margin-bottom: 1rem; }
.validation-details { }
.validation-item { padding: 0.5rem; margin: 0.25rem 0; border-radius: 0.25rem; font-size: 0.9rem; }
.validation-item.pass { background: color-mix(in oklab, var(--bg-elev), #22c55e 8%); }
.validation-item.fail { background: color-mix(in oklab, var(--bg-elev), #ef4444 8%); }

/* SSRF demo styling */
#ssrfDemo input[type="url"] { width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; border: 1px solid var(--border); border-radius: 0.375rem; }

/* Headers demo styling */
.headers-list { }
.header-item { margin: 0.75rem 0; padding: 0.75rem; background: var(--bg-elev); border: 1px solid var(--border); border-radius: 0.375rem; }
.header-item strong { color: var(--accent); }
.header-item code { display: block; margin-top: 0.25rem; font-size: 0.85rem; }

/* Rate limit demo styling */
.limit-controls { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
.limit-controls button { padding: 0.5rem 1rem; background: var(--accent); color: white; border: none; border-radius: 0.375rem; cursor: pointer; }
.limit-controls button:hover { background: color-mix(in oklab, var(--accent), black 10%); }

/* Secrets demo styling */
#secretsDemo textarea { width: 100%; padding: 0.75rem; border: 1px solid var(--border); border-radius: 0.375rem; font-family: ui-monospace, monospace; resize: vertical; }
.findings { margin-top: 1rem; }
.finding { padding: 0.75rem; margin: 0.5rem 0; border-radius: 0.375rem; border-left: 3px solid; }
.finding.high { border-left-color: #ef4444; background: color-mix(in oklab, var(--bg-elev), #ef4444 8%); }
.finding.medium { border-left-color: #f59e0b; background: color-mix(in oklab, var(--bg-elev), #f59e0b 8%); }
.finding.low { border-left-color: #6b7280; background: color-mix(in oklab, var(--bg-elev), #6b7280 8%); }

/* Test output styling */
.test-step { padding: 0.5rem; margin: 0.25rem 0; background: var(--bg-elev); border-radius: 0.25rem; }
.test-results { margin-top: 1rem; padding: 1rem; border-radius: 0.5rem; }
.test-results.pass { background: color-mix(in oklab, var(--bg-elev), #22c55e 8%); border: 1px solid #22c55e; }
.test-results.fail { background: color-mix(in oklab, var(--bg-elev), #ef4444 8%); border: 1px solid #ef4444; }
.result-item { padding: 0.5rem; margin: 0.25rem 0; border-radius: 0.25rem; }
.conclusion { font-weight: 600; margin-top: 1rem; padding: 0.75rem; border-radius: 0.375rem; }

.loading { text-align: center; color: var(--muted); font-style: italic; }

.security-note { color: #22c55e; font-weight: 500; margin-top: 0.5rem; }
.security-warning { color: #ef4444; font-weight: 500; margin-top: 0.5rem; }

/* Slide indicator */
.slide-indicator {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--accent);
  color: white;
  padding: 0.75rem 1.25rem;
  border-radius: 24px;
  font-weight: 600;
  font-size: 0.85rem;
  z-index: 50;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  border: 2px solid var(--accent-weak);
  opacity: 0.9;
  transition: all 200ms ease;
}

.slide-indicator:hover {
  opacity: 1;
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(0,0,0,0.2);
}

/* Table of Contents */
.table-of-contents {
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  width: 320px;
  background: color-mix(in oklab, var(--bg-elev), black 5%);
  backdrop-filter: blur(20px);
  border-right: 1px solid var(--border);
  z-index: 40;
  opacity: 0;
  pointer-events: none;
  transform: translateX(-100%);
  transition: all 250ms ease;
  overflow-y: auto;
}

.table-of-contents:hover {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(0);
}

.toc-header {
  padding: 1.5rem 1.5rem 1rem 1.5rem;
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--text);
  border-bottom: 1px solid var(--border);
  background: color-mix(in oklab, var(--bg-elev), var(--accent) 5%);
}

.toc-content {
  padding: 0.5rem 0;
}

.toc-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  transition: all 150ms ease;
  border-left: 3px solid transparent;
}

.toc-item:hover {
  background: color-mix(in oklab, var(--bg-elev), var(--accent) 8%);
  border-left-color: var(--accent);
}

.toc-item.active {
  background: color-mix(in oklab, var(--bg-elev), var(--accent) 12%);
  border-left-color: var(--accent);
  font-weight: 600;
}

.toc-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: color-mix(in oklab, var(--bg-elev), var(--accent) 15%);
  color: var(--accent);
  font-size: 0.8rem;
  font-weight: 600;
  flex-shrink: 0;
}

.toc-item.active .toc-number {
  background: var(--accent);
  color: white;
}

.toc-title {
  font-size: 0.9rem;
  line-height: 1.3;
  color: var(--text);
}

.toc-item.active .toc-title {
  color: var(--accent);
}

/* Small screens */
@media (max-width: 700px) { 
  .comparison { grid-template-columns: 1fr; }
  .resources-grid { grid-template-columns: 1fr; }
  .user-tabs { flex-wrap: wrap; }
  .test-actions { justify-content: center; }
  .vuln-grid { grid-template-columns: 1fr; }
  .testing-steps { grid-template-columns: 1fr; }
  .checklist-grid { grid-template-columns: 1fr; }
  .limit-controls { justify-content: center; }
}

/* Per-slide color themes */
.slide { --accent: #0ea5e9; --accent-weak: #bae6fd; }
.slide[data-color="blue"]  { --accent: #0ea5e9; --accent-weak: #bae6fd; }
.slide[data-color="indigo"]{ --accent: #6366f1; --accent-weak: #c7d2fe; }
.slide[data-color="violet"]{ --accent: #8b5cf6; --accent-weak: #ddd6fe; }
.slide[data-color="teal"]  { --accent: #14b8a6; --accent-weak: #99f6e4; }
.slide[data-color="green"] { --accent: #22c55e; --accent-weak: #bbf7d0; }
.slide[data-color="orange"]{ --accent: #f59e0b; --accent-weak: #fde68a; }
.slide[data-color="red"]   { --accent: #ef4444; --accent-weak: #fecaca; }
